<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>API Documentation</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .controller { border: 1px solid #ddd; margin-bottom: 20px; padding: 15px; }
        .controller-header { background: #f5f5f5; padding: 10px; margin: -15px -15px 15px -15px; }
        .api-item { border-left: 3px solid #4CAF50; padding: 10px; margin: 10px 0; background: #fafafa; }
        .method { display: inline-block; padding: 3px 8px; border-radius: 3px; font-weight: bold; color: white; }
        .GET { background: #61affe; }
        .POST { background: #49cc90; }
        .PUT { background: #fca130; }
        .DELETE { background: #f93e3e; }
        .params { margin-top: 10px; }
        .param-item { background: white; padding: 5px; margin: 3px 0; }
    </style>
</head>
<body>
    <h1>API Documentation</h1>

    <div th:each="entry : ${docs}">
        <div class="controller">
            <div class="controller-header">
                <h2 th:text="${entry.value[0].tagInfo.summary} + ${entry.value[0].tagInfo.getTagName()}">Controller Name</h2>
                <p th:text="${entry.value[0].tagInfo.description}">Controller Description</p>
            </div>

            <div th:each="api : ${entry.value}" class="api-item">
                <div>
                    <span class="method" th:classappend="${api.method}" th:text="${api.method}">GET</span>
                    <strong th:text="${api.url}">/api/test</strong>
                </div>
                <div th:if="${api.summary}" th:text="${api.summary}">API Summary</div>
                <div th:if="${api.description}" th:text="${api.description}">API Description</div>

                <div th:if="${api.pathVariables != null && !api.pathVariables.isEmpty()}" class="params">
                    <strong>Path Variables:</strong>
                    <div th:each="pv : ${api.pathVariables}" class="param-item">
                        <code th:text="${pv.name}">id</code> (<span th:text="${pv.type}">Long</span>)
                        <span th:if="${pv.description}" th:text="' - ' + ${pv.description}"></span>
                    </div>
                </div>

                <div th:if="${api.queryParams != null && !api.queryParams.isEmpty()}" class="params">
                    <strong>Query Parameters:</strong>
                    <div th:each="qp : ${api.queryParams}" class="param-item">
                        <code th:text="${qp.name}">name</code> (<span th:text="${qp.type}">String</span>)
                        <span th:if="${qp.required}" style="color: red;">*required</span>
                        <span th:if="${qp.description}" th:text="' - ' + ${qp.description}"></span>
                    </div>
                </div>

                <div th:if="${api.requestBody != null}" class="params">
                    <strong>Request Body:</strong>
                    <div class="param-item">
                        Type: <code th:text="${api.requestBody.type}">RequestDto</code>
                    </div>
                </div>

                <div th:if="${api.responseBody != null}" class="params">
                    <strong>Response Body:</strong>
                    <div class="param-item">
                        Type: <code th:text="${api.responseBody.type}">ResponseDto</code>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>